========================================
Документация по программе 3D Transformations App
========================================

Описание:
-----------
Данная программа является приложением для создания, загрузки, отображения и преобразования 3D объектов. Приложение разработано с использованием Tkinter в Python и предоставляет графический интерфейс для следующих задач:
- Построения стандартных 3D примитивов (куб, сфера, цилиндр)
- Загрузки 3D моделей из текстовых файлов, содержащих координаты вершин и описание граней
- Применения различных преобразований: перемещения, поворота, масштабирования. Пользователь может также переключаться между перспективным и ортографическим режимами отображения.
- Выбора фиксированного вида объекта (передний, задний, слева, справа, сверху, снизу) с помощью группы радиокнопок, расположенных в столбик, что реализуется посредством применения фиксированного поворота.
- Отображения вспомогательной объемной сетки и индикации осей координат (X, Y, Z) для удобной ориентации в рабочей области.

Структура проекта:
-------------------
1. gui.py
   Этот модуль является основным для всего приложения. Он содержит класс MainWindow, который отвечает за:
   - Создание главного окна, в котором располагаются меню, панель инструментов, область отображения (Canvas) и статусная строка.
   - Реализацию пользовательского интерфейса, включая обработку событий и горячих клавиш.
   - Построение 3D объектов через диалоговые окна (например, диалоги для ввода параметров куба, сферы и цилиндра).
   - Загрузку 3D объектов из текстовых файлов с помощью функции read_object (модуль file_manager.py).
   - Применение преобразований к объекту: перемещение, поворот, масштабирование, а также переключение между режимами перспективы и ортографическим отображением.
   - Организацию окна 3D-преобразований, где доступны секции для перемещения, поворота, масштабирования, а также для выбора вида объекта с помощью радиокнопок.

2. transformation.py
   Модуль содержит функции для генерации матриц преобразований:
   - create_translation_matrix(dx, dy, dz) создает матрицу перемещения по осям.
   - create_scaling_matrix(sx, sy, sz) создает матрицу масштабирования.
   - create_rotation_matrix(rx, ry, rz) создает матрицу поворота. Углы вводятся в градусах и поворот происходит в порядке объединения отдельных матриц (обычно сначала поворот вокруг оси Z, потом Y, затем X).
   - create_perspective_projection_matrix(d) создает матрицу для перспективной проекции, где d – расстояние до экрана.

3. file_manager.py
   Модуль предназначен для работы с текстовыми файлами, содержащими 3D модели. Функция read_object(filename) читает файл, который должен иметь следующий формат:
   - Первая строка содержит количество вершин (целое число).
   - Последующие N строк содержат координаты вершин, заданные тремя числами (x, y, z), разделёнными пробелами.
   - Следующая строка содержит количество граней.
   - После этого M строк описывают грани, каждая грань задается списком индексов вершин, разделённых пробелами. Индексы начинаются с 0.
   Пустые строки и комментарии (строки, начинающиеся с символа "#") игнорируются. Полученные данные возвращаются в виде словаря с ключами "vertices" и "faces".

4. objects_3d.py
   Модуль содержит функции для создания примитивных 3D объектов:
   - create_cube(side) генерирует вершины и грани куба с заданной длиной стороны.
   - create_sphere(radius, lat_steps, lon_steps) генерирует вершины и грани сферы с заданным радиусом и числом шагов по широте и долготе для сглаживания поверхности.
   - create_cylinder(radius, height, segments) создает цилиндр, аппроксимируя окружность заданным числом сегментов, и генерирует боковые грани, а также многоугольники для нижней и верхней крышки.

Функциональные возможности:
-----------------------------
1. Построение объектов:
   - Куб: Пользователь может выбрать инструмент "Куб" через панель инструментов или нажатием клавиши "1". После вызова диалогового окна вводится длина стороны, и куб строится в центре рабочей области.
   - Сфера: Для создания сферы доступен инструмент "Сфера" (или клавиша "2"). После ввода радиуса сферы объект строится в центре окна.
   - Цилиндр: Инструмент "Цилиндр" (или клавиша "3") позволяет задать параметры цилиндра – радиус и высоту. Объект строится в центре рабочей области.

2. Загрузка 3D объектов:
   - С помощью меню "Файл" и пункта "Открыть" пользователь может выбрать текстовой файл, оформленный в соответствии с форматом, описанным в модуле file_manager.py. После успешной загрузки объект отображается в рабочей области.

3. Преобразования объектов:
   Окно 3D-преобразований (открываемое клавишей Tab) предоставляет следующие секции:
   - Перемещение: Пользователь может ввести значения перемещения по осям X, Y, Z и нажать кнопку "Применить", чтобы сместить объект.
   - Поворот: Ввод значений углов поворота (Rx, Ry, Rz) в градусах позволяет повернуть объект. При нажатии кнопки "Применить" создается матрица поворота, и объект обновляется.
   - Масштабирование: Позволяет изменить размер объекта с помощью коэффициентов масштабирования Sx, Sy, Sz.
   - Перспектива: Чекбокс позволяет переключать режим отображения между перспективным и ортографическим. При включенной перспективе применяется коэффициент масштабирования, зависящий от глубины (коэффициент d/(d+z)).
   - Виды объекта: Группа радиокнопок, расположенная в столбик, позволяет выбрать фиксированный вид объекта (Передний, Задний, Слева, Справа, Сверху, Снизу). При выборе вида объект мгновенно поворачивается с использованием заранее заданного набора углов поворота для получения нужного ракурса.

4. Дополнительные функции:
   - Отрисовка сетки: В рабочей области можно включить или отключить объемную сетку. Это делается с помощью чекбокса на панели инструментов или горячей клавиши (G). Сетка помогает ориентироваться в пространстве.
   - Индикатор осей: В левом верхнем углу рабочей области отображаются оси координат. Ось X представлена красным цветом, Y — зеленым, Z — синим, что наглядно демонстрирует положение объектов относительно системы координат.
   - Горячие клавиши:
       Tab        - Открыть окно 3D-преобразований.
       1          - Открыть диалог для построения куба.
       2          - Открыть диалог для построения сферы.
       3          - Открыть диалог для построения цилиндра.
       C          - Очистить рабочую область.
       D          - Открыть окно с документацией.
       O          - Открыть диалог для загрузки 3D объекта из файла.
       G          - Переключить отображение сетки.
       P          - Переключить режим перспективы (перспективный/ортографический).
       Escape     - Завершить работу приложения.

Инструкции по использованию:
--------------------------------
1. Запуск программы:
   Запустите файл gui.py. После запуска откроется главное окно приложения, состоящее из меню, панели инструментов, рабочей области для отображения 3D объектов и статусной строки.

2. Построение объектов:
   - Для создания куба, сферы или цилиндра выберите соответствующий инструмент на панели или нажмите клавишу 1, 2 или 3.
   - В появившемся диалоговом окне введите необходимые параметры (например, для куба – длину стороны).
   - Нажмите кнопку "Построить" и объект будет создан в центре рабочей области.

3. Применение преобразований:
   - Нажмите клавишу Tab для открытия окна 3D-преобразований, расположенного сбоку.
   - В окне доступны секции для перемещения, поворота, масштабирования, включения/выключения перспективы и выбора вида объекта.
   - Введите необходимые значения или выберите нужный вид объекта с помощью радиокнопок. Нажмите соответствующую кнопку ("Применить") для выполнения преобразования.
   - При выборе вида объекта, объект мгновенно поворачивается согласно заготовленным углам (например, для вида "Сверху" применяется поворот на 90 градусов вокруг оси X).

4. Загрузка объектов из файла:
   - В главном меню выберите пункт "Файл" → "Открыть".
   - В появившемся диалоговом окне выберите текстовой файл с данными 3D объекта. Файл должен быть оформлен согласно описанному формату (см. примеры).
   - После успешной загрузки объект отобразится в рабочей области.

5. Дополнительное управление:
   - Для быстрой очистки рабочей области нажмите клавишу C.
   - Для открытия окна с документацией нажмите клавишу D.
   - Для открытия диалога загрузки 3D объекта из файла нажмите клавишу O.
   - Нажмите клавишу G для включения или отключения отображения сетки.
   - Нажмите клавишу P для переключения режима перспективы.
   - Для завершения работы приложения нажмите клавишу Escape.

Формат текстовых файлов с 3D объектами:
-----------------------------------------
Файлы должны иметь следующий формат:
1. Первая строка - количество вершин (целое число).
2. Следующие N строк - координаты вершин в формате "x y z" (числа разделены пробелами).
3. Следующая строка - количество граней объекта (целое число).
4. Следующие M строк - описание граней, где каждая грань задается как список индексов вершин (индексы начинаются с 0).

Примеры файлов:
-----------------------------------------
Файл cube.txt:
8
0 0 0
100 0 0
100 100 0
0 100 0
0 0 100
100 0 100
100 100 100
0 100 100
6
0 1 2 3
4 5 6 7
0 1 5 4
2 3 7 6
1 2 6 5
0 3 7 4

Файл pyramid.txt:
5
0 0 0
100 0 0
100 100 0
0 100 0
50 50 150
5
0 1 2 3
0 1 4
1 2 4
2 3 4
3 0 4

Файл cylinder.txt:
16
50 0 0
35.36 35.36 0
0 50 0
-35.36 35.36 0
-50 0 0
-35.36 -35.36 0
0 -50 0
35.36 -35.36 0
50 0 100
35.36 35.36 100
0 50 100
-35.36 35.36 100
-50 0 100
-35.36 -35.36 100
0 -50 100
35.36 -35.36 100
10
0 1 9 8
1 2 10 9
2 3 11 10
3 4 12 11
4 5 13 12
5 6 14 13
6 7 15 14
7 0 8 15
0 1 2 3 4 5 6 7
8 9 10 11 12 13 14 15

Файл tetrahedron.txt:
4
0 0 0
100 0 0
50 87 0
50 29 80
4
0 1 2
0 1 3
1 2 3
2 0 3

Заключение:
------------
Программа 3D Transformations App обладает широким функционалом для работы с простыми 3D моделями. Программа позволяет:
- Создавать примитивные объекты (куб, сферу, цилиндр) с помощью диалоговых окон.
- Загружать 3D объекты из текстовых файлов, оформленных согласно заданному формату.
- Применять трансформации (перемещение, поворот, масштабирование) к объекту с мгновенным обновлением отображения.
- Переключаться между режимами отображения (перспективный и ортографический) и выбирать фиксированные виды объекта через радиокнопки.
- Использовать дополнительные функции, такие как отображение объемной сетки и индикатор осей, а также работать с горячими клавишами для упрощения управления.

Эта документация описывает все основные функции и возможности программы, а также содержит пример формата текстовых файлов с 3D объектами. Пользователь может изучить данную инструкцию и использовать программу в своих задачах, копируя и модифицируя представленный код при необходимости.

========================================
